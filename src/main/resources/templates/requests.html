<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Requests</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <img class="logo" src="/img/sfu-logo@2x.png" alt="sfu-logo"/>
    </header>
    <div class="container col-md-10 offset-md-1 wrapper mb-5 col-lg-10" id="app">
        <div class="container col-md-10">
            <div class="row mt-5">
                <h1 class="mt-5">Requests</h1>
            </div>
            <div class="row mt-5">
                <div class="input-group search-group">
                    <span class="fa fa-search"></span>
                    <input type="text" class="form-control" id="search-bar" v-model="searchTerm" placeholder="search"/>
                    <div class="error"></div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-md-8 mx-auto">
                    <ul class="nav nav-pills nav-fill">
                        <li class="nav-item"><a href="" v-bind:class="{'active': isActive('ALL')}" class="nav-link">All</a></li>
                        <li class="nav-item"><a href="" v-bind:class="{'active': isActive('WAITING')}"class="nav-link">Waiting</a></li>
                        <li class="nav-item"><a href="" v-bind:class="{'active': isActive('APPROVED')}"class="nav-link">Approved</a></li>
                        <li class="nav-item"><a href="" v-bind:class="{'active': isActive('REJECTED')}"class="nav-link">Rejected</a></li>
                    </ul>
                </div>
            </div>
            <div class="row mt-4">
                <table class="table">
                    <thead>
                    <tr>
                        <th>Name<i class="fa fa-sort fa-fw pull-right"></i></th>
                        <th>Phone<i class="fa fa-sort fa-fw pull-right"></i></th>
                        <th>ID<i class="fa fa-sort fa-fw pull-right"></i></th>
                        <th>Location<i class="fa fa-sort fa-fw pull-right"></i></th>
                        <th># Attendees<i class="fa fa-sort fa-fw pull-right"></i></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-for="request in filteredRequests">
                        <td>{{request.name}}</td>
                        <td>{{request.phone}}</td>
                        <td>{{request.id}}</td>
                        <td>{{request.location}}</td>
                        <td>{{request.numAttendees}}</td>
                    </tr>
                    </tbody>
                </table>
                    <span class="text-muted" v-if="!filteredRequests.length">No results.</span>
            </div>
        </div>
        <div class="bottom-space"></div>
    </div>
</body>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/vue.js"></script>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            activeStatus: "WAITING",
            searchTerm: "",
            requests: [
                {
                    name: "Ray",
                    phone: "911",
                    id: "301235622",
                    location: "Surrey",
                    numAttendees: 5
                },
                {
                    name: "Brian",
                    phone: "6044305123",
                    id: "301235624",
                    location: "Surrey",
                    numAttendees: 48
                }

            ]
        },
        methods: {
            isActive: function(status) {
                return this.activeStatus == status;
            }
        },
        computed: {
            filteredRequests: {
                cache: false,
                get: function() {
                    return this.requests.filter(request => {
                        return request.name.toLowerCase().includes(this.searchTerm.toLowerCase());
                    })
                }
            }
        }

    });
</script>
</html>